# Capture的使用

## 介绍

这个是一个高速的边沿捕获器，在介绍里面说它可以用于检测GPIO上的边沿触发事件，不过这个文档说得很笼统，根本看不懂，所以这个功能需要看一下主程序，最好运行一下，否则确实很难理解。总体来说它可以检测并统计高速切换的电平信号（如PWM），并以一定的周期将该信号以中断的形式输出。比如说我现在有一个5KHz的方波信号，那么使用GPIO中断去检测统计这个信号可能会有点效果不佳统计不良，而且一直触发中断去统计也很消耗性能，那么我们就可以使用这个捕获器去自动捕获，然后定时输出即可。使用这个功能感觉可以去分析逻辑协议等。

## 使用

1.  Capture_init
2.  Capture_Params_init
3.  细调
    1.  mode：检测模式，即边沿触发模式，上升、下降或两者或上升开始下降停止或相反。
    2.  CallbackFxn：回调函数，第一个参数是句柄，第二个是回调时周期内检测到的电平数
    3.  PeriodUnits：周期单位，微秒、赫兹、计时器数、纳秒
4.  Capture_open
5.  Capture_start
6.  Capture_stop
7.  Capture_close

## 注意

为了保证Capture的高速和稳定，请不要在中断中使用长时间中断的函数，最好以信号量通知和全局变量的方式将数据传到外面去处理。详情可以参考例程，关于其中信号量的部分我在后面稍微讲一下，主要是没找到手册，要依靠看库函数来讲。

